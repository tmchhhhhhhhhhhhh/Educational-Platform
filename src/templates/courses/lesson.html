{% extends 'base.html' %}

{% block content %}
<section class="max-w-4xl mx-auto py-12 px-4">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —É—Ä–æ–∫–∞ -->
  <h1 class="text-4xl font-bold text-gray-900 mb-4">{{ object.title }}</h1>

  <!-- –û–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–∞ -->
  {% if object.description %}
    <p class="text-gray-600 mb-8 leading-relaxed">{{ object.description }}</p>
  {% endif %}

  <!-- JUPYTER NOTEBOOKS –°–ï–ö–¶–ò–Ø -->
  {% if notebooks.exists %}
  <div class="mb-8">
    <h2 class="text-2xl font-semibold text-gray-800 mb-4">üìì Jupyter Notebooks</h2>
    <div class="grid gap-4">
      {% for notebook in notebooks %}
      <div class="card">
        <div class="flex justify-between items-start mb-3">
          <div>
            <h3 class="text-lg font-semibold text-gray-900">{{ notebook.title }}</h3>
            {% if notebook.description %}
            <p class="text-sm text-gray-600 mt-1">{{ notebook.description }}</p>
            {% endif %}
          </div>
        </div>
        
        <div class="flex flex-wrap gap-2">
          <a href="{% url 'notebook-detail' notebook.id %}" 
             class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium">
            üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä
          </a>
          
          {% if notebook.get_binder_url %}
          <a href="/" 
             class="px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm font-medium">
            üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å
          </a>
          {% endif %}
          
          <a href="{{ notebook.file.url }}" download
             class="px-4 py-2 bg-gray-100 rounded-lg text-gray-800 hover:bg-gray-200 transition-colors text-sm font-medium">
            üì• –°–∫–∞—á–∞—Ç—å .ipynb
          </a>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  {% if object.notebook_link or object.test_link %}
  <div class="flex flex-col gap-4 mb-8">
    {% if object.notebook_link %}
      <a href="{{ object.notebook_link }}" target="_blank"
         class="px-4 py-2 bg-gray-100 rounded-lg text-gray-800 hover:bg-gray-200 transition-colors">
         –û—Ç–∫—Ä—ã—Ç—å –Ω–æ—É—Ç–±—É–∫ (–≤–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞)
      </a>
    {% endif %}

    {% if object.test_link %}
      <a href="{{ object.test_link }}" target="_blank"
         class="px-4 py-2 bg-gray-100 rounded-lg text-gray-800 hover:bg-gray-200 transition-colors">
         –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç
      </a>
    {% endif %}
  </div>
  {% endif %}

  {% if object.requires_email %}
    <p class="mt-6 text-sm text-gray-500">
      –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É —É—Ä–æ–∫—É —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ email.
    </p>
    <div id="hx-login" hx-get="/hx/login/" hx-trigger="load" hx-target="#hx-login" hx-swap="outerHTML"></div>
  {% endif %}

  <p class="mt-6 text-xs text-gray-400">
    –î–æ–±–∞–≤–ª–µ–Ω–æ: {{ object.timestamp|date:"d M Y" }}, –æ–±–Ω–æ–≤–ª–µ–Ω–æ: {{ object.updated|date:"d M Y" }}
  </p>
</section>
{% endblock content %}